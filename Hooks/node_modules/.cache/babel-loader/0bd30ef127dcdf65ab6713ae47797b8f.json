{"ast":null,"code":"var _jsxFileName = \"/home/thiago/Documentos/react/burger-builder/Hooks/src/containers/BurgerBuilder/BurgerBuilder.js\";\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport Aux from '../../hoc/Aux';\nimport Burger from '../../components/Burger/Burger';\nimport BuildControls from '../../components/Burger/BuildControls/BuildControls';\nimport Modal from '../../components/UI/Modal/Modal';\nimport Spinner from '../../components/UI/Spinner/Spinner';\nimport OrderSummary from '../../components/Burger/OrderSummary/OrderSummary';\nimport axios from '../../axios-orders';\nimport withErrorHandler from '../../hoc/withErrorHandler';\nimport * as actions from '../../store/actions/index';\n\nconst BurgerBuilder = props => {\n  const [purchasing, setPurchasing] = useState(false);\n  const {\n    onInitIngredients,\n    ingredients\n  } = props;\n  useEffect(() => {\n    const totalIngredients = Object.values(ingredients).reduce((total, current) => total + current, 0);\n\n    if (totalIngredients === 0) {\n      onInitIngredients();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n\n  const updatePurchasable = ingredients => {\n    const sum = Object.values(ingredients).reduce((sum, el) => sum += el, 0);\n    return sum > 0;\n  };\n\n  const purchaseHandler = () => {\n    if (props.isAuthenticated) {\n      setPurchasing(true);\n    } else {\n      props.onAuthRedirect('/checkout');\n      props.history.push('/auth');\n    }\n  };\n\n  const purchaseCancelHandler = () => {\n    setPurchasing(false);\n  };\n\n  const purchaseContinueHandler = () => {\n    props.onInitPurchase();\n    props.history.push('/checkout');\n  };\n\n  const disableInfo = {};\n  let orderSummary = null;\n  let burger = props.error ? React.createElement(\"p\", {\n    style: {\n      textAlign: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \"Ingredients can't be loaded!\") : React.createElement(Spinner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  });\n\n  if (props.ingredients) {\n    for (const ingredient of Object.keys(props.ingredients)) {\n      disableInfo[ingredient] = props.ingredients[ingredient] <= 0;\n    }\n\n    burger = React.createElement(Aux, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(Burger, {\n      ingredients: props.ingredients,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), React.createElement(BuildControls, {\n      addIngredients: props.onIngredientsAdded,\n      removeIngredients: props.onIngredientsRemoved,\n      disabled: disableInfo,\n      price: props.price,\n      ordered: purchaseHandler,\n      isAuth: props.isAuthenticated,\n      purchasable: updatePurchasable(props.ingredients),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }));\n    orderSummary = React.createElement(OrderSummary, {\n      price: props.price,\n      cancelingPurchase: purchaseCancelHandler,\n      continuingPurchase: purchaseContinueHandler,\n      ingredients: props.ingredients,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(Aux, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(Modal, {\n    show: purchasing,\n    closing: purchaseCancelHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, orderSummary), burger);\n};\n\nconst mapStateToProps = state => {\n  return {\n    ingredients: state.burgerBuilder.ingredients,\n    price: state.burgerBuilder.price,\n    purchasable: state.burgerBuilder.purchasable,\n    error: state.burgerBuilder.error,\n    isAuthenticated: !!state.auth.token\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onIngredientsAdded: name => dispatch(actions.addIngredient(name)),\n    onIngredientsRemoved: name => dispatch(actions.removeIngredient(name)),\n    onInitIngredients: () => dispatch(actions.initIngredients()),\n    onInitPurchase: () => dispatch(actions.purchaseInit()),\n    onAuthRedirect: path => dispatch(actions.authRedirectPath(path))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler(BurgerBuilder, axios));","map":{"version":3,"sources":["/home/thiago/Documentos/react/burger-builder/Hooks/src/containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","useState","useEffect","connect","Aux","Burger","BuildControls","Modal","Spinner","OrderSummary","axios","withErrorHandler","actions","BurgerBuilder","props","purchasing","setPurchasing","onInitIngredients","ingredients","totalIngredients","Object","values","reduce","total","current","updatePurchasable","sum","el","purchaseHandler","isAuthenticated","onAuthRedirect","history","push","purchaseCancelHandler","purchaseContinueHandler","onInitPurchase","disableInfo","orderSummary","burger","error","textAlign","ingredient","keys","onIngredientsAdded","onIngredientsRemoved","price","mapStateToProps","state","burgerBuilder","purchasable","auth","token","mapDispatchToProps","dispatch","name","addIngredient","removeIngredient","initIngredients","purchaseInit","path","authRedirectPath"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport Aux from '../../hoc/Aux'\nimport Burger from '../../components/Burger/Burger'\nimport BuildControls from '../../components/Burger/BuildControls/BuildControls'\nimport Modal from '../../components/UI/Modal/Modal'\nimport Spinner from '../../components/UI/Spinner/Spinner'\nimport OrderSummary from '../../components/Burger/OrderSummary/OrderSummary'\nimport axios from '../../axios-orders'\nimport withErrorHandler from '../../hoc/withErrorHandler'\nimport * as actions from '../../store/actions/index'\n\nconst BurgerBuilder = (props) => {\n    const [purchasing, setPurchasing] = useState(false)\n    const { onInitIngredients, ingredients } = props\n\n    useEffect(() => {\n        const totalIngredients = Object.values(ingredients).reduce(\n            (total, current) => total + current,\n            0\n        )\n\n        if (totalIngredients === 0) {\n            onInitIngredients()\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    const updatePurchasable = (ingredients) => {\n        const sum = Object.values(ingredients).reduce((sum, el) => (sum += el), 0)\n        return sum > 0\n    }\n\n    const purchaseHandler = () => {\n        if (props.isAuthenticated) {\n            setPurchasing(true)\n        } else {\n            props.onAuthRedirect('/checkout')\n            props.history.push('/auth')\n        }\n    }\n\n    const purchaseCancelHandler = () => {\n        setPurchasing(false)\n    }\n\n    const purchaseContinueHandler = () => {\n        props.onInitPurchase()\n        props.history.push('/checkout')\n    }\n\n    const disableInfo = {}\n    let orderSummary = null\n    let burger = props.error ? (\n        <p style={{ textAlign: 'center' }}>Ingredients can't be loaded!</p>\n    ) : (\n        <Spinner />\n    )\n\n    if (props.ingredients) {\n        for (const ingredient of Object.keys(props.ingredients)) {\n            disableInfo[ingredient] = props.ingredients[ingredient] <= 0\n        }\n        burger = (\n            <Aux>\n                <Burger ingredients={props.ingredients} />\n                <BuildControls\n                    addIngredients={props.onIngredientsAdded}\n                    removeIngredients={props.onIngredientsRemoved}\n                    disabled={disableInfo}\n                    price={props.price}\n                    ordered={purchaseHandler}\n                    isAuth={props.isAuthenticated}\n                    purchasable={updatePurchasable(props.ingredients)}\n                />\n            </Aux>\n        )\n\n        orderSummary = (\n            <OrderSummary\n                price={props.price}\n                cancelingPurchase={purchaseCancelHandler}\n                continuingPurchase={purchaseContinueHandler}\n                ingredients={props.ingredients}\n            />\n        )\n    }\n\n    return (\n        <Aux>\n            <Modal show={purchasing} closing={purchaseCancelHandler}>\n                {orderSummary}\n            </Modal>\n            {burger}\n        </Aux>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        ingredients: state.burgerBuilder.ingredients,\n        price: state.burgerBuilder.price,\n        purchasable: state.burgerBuilder.purchasable,\n        error: state.burgerBuilder.error,\n        isAuthenticated: !!state.auth.token,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        onIngredientsAdded: (name) => dispatch(actions.addIngredient(name)),\n        onIngredientsRemoved: (name) => dispatch(actions.removeIngredient(name)),\n        onInitIngredients: () => dispatch(actions.initIngredients()),\n        onInitPurchase: () => dispatch(actions.purchaseInit()),\n        onAuthRedirect: (path) => dispatch(actions.authRedirectPath(path)),\n    }\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler(BurgerBuilder, axios))\n"]},"metadata":{},"sourceType":"module"}