{"ast":null,"code":"var _jsxFileName = \"/home/thiago/Documentos/react/burger-builder/Hooks/src/containers/BurgerBuilder/BurgerBuilder.js\";\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport Aux from '../../hoc/Aux';\nimport Burger from '../../components/Burger/Burger';\nimport BuildControls from '../../components/Burger/BuildControls/BuildControls';\nimport Modal from '../../components/UI/Modal/Modal';\nimport Spinner from '../../components/UI/Spinner/Spinner';\nimport OrderSummary from '../../components/Burger/OrderSummary/OrderSummary';\nimport axios from '../../axios-orders';\nimport withErrorHandler from '../../hoc/withErrorHandler';\nimport * as actions from '../../store/actions/index';\n\nconst BurgerBuilder = props => {\n  const [purchasing, setPurchasing] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const {\n    onInitIngredients\n  } = props;\n  useEffect(() => {\n    onInitIngredients();\n  }, [onInitIngredients]);\n\n  const updatePurchasable = ingredients => {\n    const sum = Object.values(ingredients).reduce((sum, el) => sum += el, 0);\n    return sum > 0;\n  };\n\n  const purchaseHandler = () => {\n    if (props.isAuthenticated) {\n      setState({\n        purchasing: true\n      });\n    } else {\n      props.onAuthRedirect('/checkout');\n      props.history.push('/auth');\n    }\n  };\n\n  const purchaseCancelHandler = () => {\n    setState({\n      purchasing: false\n    });\n  };\n\n  const purchaseContinueHandler = () => {\n    props.onInitPurchase();\n    props.history.push('/checkout');\n  };\n\n  const disableInfo = {};\n  let orderSummary = null;\n  let burger = props.error ? React.createElement(\"p\", {\n    style: {\n      textAlign: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"Ingredients can't be loaded!\") : React.createElement(Spinner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  });\n\n  if (state.loading) {\n    orderSummary = React.createElement(Spinner, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    });\n  }\n\n  if (props.ingredients) {\n    for (const ingredient of Object.keys(props.ingredients)) {\n      disableInfo[ingredient] = props.ingredients[ingredient] <= 0;\n    }\n\n    burger = React.createElement(Aux, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(Burger, {\n      ingredients: props.ingredients,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }), React.createElement(BuildControls, {\n      addIngredients: props.onIngredientsAdded,\n      removeIngredients: props.onIngredientsRemoved,\n      disabled: disableInfo,\n      price: props.price,\n      ordered: purchaseHandler,\n      isAuth: props.isAuthenticated,\n      purchasable: updatePurchasable(props.ingredients),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }));\n    orderSummary = React.createElement(OrderSummary, {\n      price: props.price,\n      cancelingPurchase: purchaseCancelHandler,\n      continuingPurchase: purchaseContinueHandler,\n      ingredients: props.ingredients,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(Aux, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(Modal, {\n    show: state.purchasing,\n    closing: purchaseCancelHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, orderSummary), burger);\n};\n\nconst mapStateToProps = state => {\n  return {\n    ingredients: state.burgerBuilder.ingredients,\n    price: state.burgerBuilder.price,\n    purchasable: state.burgerBuilder.purchasable,\n    error: state.burgerBuilder.error,\n    isAuthenticated: !!state.auth.token\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onIngredientsAdded: name => dispatch(actions.addIngredient(name)),\n    onIngredientsRemoved: name => dispatch(actions.removeIngredient(name)),\n    onInitIngredients: () => dispatch(actions.initIngredients()),\n    onInitPurchase: () => dispatch(actions.purchaseInit()),\n    onAuthRedirect: path => dispatch(actions.authRedirectPath(path))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler(BurgerBuilder, axios));","map":{"version":3,"sources":["/home/thiago/Documentos/react/burger-builder/Hooks/src/containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","useState","useEffect","connect","Aux","Burger","BuildControls","Modal","Spinner","OrderSummary","axios","withErrorHandler","actions","BurgerBuilder","props","purchasing","setPurchasing","loading","setLoading","onInitIngredients","updatePurchasable","ingredients","sum","Object","values","reduce","el","purchaseHandler","isAuthenticated","setState","onAuthRedirect","history","push","purchaseCancelHandler","purchaseContinueHandler","onInitPurchase","disableInfo","orderSummary","burger","error","textAlign","state","ingredient","keys","onIngredientsAdded","onIngredientsRemoved","price","mapStateToProps","burgerBuilder","purchasable","auth","token","mapDispatchToProps","dispatch","name","addIngredient","removeIngredient","initIngredients","purchaseInit","path","authRedirectPath"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport Aux from '../../hoc/Aux'\nimport Burger from '../../components/Burger/Burger'\nimport BuildControls from '../../components/Burger/BuildControls/BuildControls'\nimport Modal from '../../components/UI/Modal/Modal'\nimport Spinner from '../../components/UI/Spinner/Spinner'\nimport OrderSummary from '../../components/Burger/OrderSummary/OrderSummary'\nimport axios from '../../axios-orders'\nimport withErrorHandler from '../../hoc/withErrorHandler'\nimport * as actions from '../../store/actions/index'\n\nconst BurgerBuilder = (props) => {\n    const [purchasing, setPurchasing] = useState(false)\n    const [loading, setLoading] = useState(false)\n    const { onInitIngredients } = props\n\n    useEffect(() => {\n        onInitIngredients()\n    }, [onInitIngredients])\n\n    const updatePurchasable = (ingredients) => {\n        const sum = Object.values(ingredients).reduce((sum, el) => (sum += el), 0)\n        return sum > 0\n    }\n\n    const purchaseHandler = () => {\n        if (props.isAuthenticated) {\n            setState({ purchasing: true })\n        } else {\n            props.onAuthRedirect('/checkout')\n            props.history.push('/auth')\n        }\n    }\n\n    const purchaseCancelHandler = () => {\n        setState({ purchasing: false })\n    }\n\n    const purchaseContinueHandler = () => {\n        props.onInitPurchase()\n        props.history.push('/checkout')\n    }\n\n    const disableInfo = {}\n    let orderSummary = null\n    let burger = props.error ? (\n        <p style={{ textAlign: 'center' }}>Ingredients can't be loaded!</p>\n    ) : (\n        <Spinner />\n    )\n\n    if (state.loading) {\n        orderSummary = <Spinner />\n    }\n\n    if (props.ingredients) {\n        for (const ingredient of Object.keys(props.ingredients)) {\n            disableInfo[ingredient] = props.ingredients[ingredient] <= 0\n        }\n        burger = (\n            <Aux>\n                <Burger ingredients={props.ingredients} />\n                <BuildControls\n                    addIngredients={props.onIngredientsAdded}\n                    removeIngredients={props.onIngredientsRemoved}\n                    disabled={disableInfo}\n                    price={props.price}\n                    ordered={purchaseHandler}\n                    isAuth={props.isAuthenticated}\n                    purchasable={updatePurchasable(props.ingredients)}\n                />\n            </Aux>\n        )\n\n        orderSummary = (\n            <OrderSummary\n                price={props.price}\n                cancelingPurchase={purchaseCancelHandler}\n                continuingPurchase={purchaseContinueHandler}\n                ingredients={props.ingredients}\n            />\n        )\n    }\n\n    return (\n        <Aux>\n            <Modal show={state.purchasing} closing={purchaseCancelHandler}>\n                {orderSummary}\n            </Modal>\n            {burger}\n        </Aux>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        ingredients: state.burgerBuilder.ingredients,\n        price: state.burgerBuilder.price,\n        purchasable: state.burgerBuilder.purchasable,\n        error: state.burgerBuilder.error,\n        isAuthenticated: !!state.auth.token,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        onIngredientsAdded: (name) => dispatch(actions.addIngredient(name)),\n        onIngredientsRemoved: (name) => dispatch(actions.removeIngredient(name)),\n        onInitIngredients: () => dispatch(actions.initIngredients()),\n        onInitPurchase: () => dispatch(actions.purchaseInit()),\n        onAuthRedirect: (path) => dispatch(actions.authRedirectPath(path)),\n    }\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler(BurgerBuilder, axios))\n"]},"metadata":{},"sourceType":"module"}