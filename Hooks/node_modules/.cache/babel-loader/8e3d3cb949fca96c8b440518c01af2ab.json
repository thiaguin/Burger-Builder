{"ast":null,"code":"import { useState, useEffect } from 'react';\nexport default (axios => {\n  const {\n    request,\n    response\n  } = axios.interceptors;\n  const [error, setError] = useState(null);\n  const reqInterceptor = axios.interceptors.request.use(req => {\n    setError(null);\n    return req;\n  });\n  const resInterceptor = axios.interceptors.response.use(res => res, err => {\n    console.log('ssa', Object.keys(err), err.response);\n    setError({\n      message: err.response.data\n    });\n  });\n  useEffect(() => {\n    return () => {\n      request.eject(reqInterceptor);\n    };\n  }, [request, reqInterceptor]);\n  useEffect(() => {\n    return () => {\n      response.eject(resInterceptor);\n    };\n  }, [response, resInterceptor]);\n\n  const closeErrorHandler = () => {\n    setError(null);\n  };\n\n  console.log('err', error);\n  return [error, closeErrorHandler];\n});","map":{"version":3,"sources":["/home/thiago/Documentos/react/burger-builder/Hooks/src/hooks/httpErrorHandler.js"],"names":["useState","useEffect","axios","request","response","interceptors","error","setError","reqInterceptor","use","req","resInterceptor","res","err","console","log","Object","keys","message","data","eject","closeErrorHandler"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA,gBAAgBC,KAAD,IAAW;AACtB,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA;AAAX,MAAwBF,KAAK,CAACG,YAApC;AACA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,IAAD,CAAlC;AAEA,QAAMQ,cAAc,GAAGN,KAAK,CAACG,YAAN,CAAmBF,OAAnB,CAA2BM,GAA3B,CAAgCC,GAAD,IAAS;AAC3DH,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACA,WAAOG,GAAP;AACH,GAHsB,CAAvB;AAKA,QAAMC,cAAc,GAAGT,KAAK,CAACG,YAAN,CAAmBD,QAAnB,CAA4BK,GAA5B,CAClBG,GAAD,IAASA,GADU,EAElBC,GAAD,IAAS;AACLC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBC,MAAM,CAACC,IAAP,CAAYJ,GAAZ,CAAnB,EAAqCA,GAAG,CAACT,QAAzC;AACAG,IAAAA,QAAQ,CAAC;AAAEW,MAAAA,OAAO,EAAEL,GAAG,CAACT,QAAJ,CAAae;AAAxB,KAAD,CAAR;AACH,GALkB,CAAvB;AAQAlB,EAAAA,SAAS,CAAC,MAAM;AACZ,WAAO,MAAM;AACTE,MAAAA,OAAO,CAACiB,KAAR,CAAcZ,cAAd;AACH,KAFD;AAGH,GAJQ,EAIN,CAACL,OAAD,EAAUK,cAAV,CAJM,CAAT;AAMAP,EAAAA,SAAS,CAAC,MAAM;AACZ,WAAO,MAAM;AACTG,MAAAA,QAAQ,CAACgB,KAAT,CAAeT,cAAf;AACH,KAFD;AAGH,GAJQ,EAIN,CAACP,QAAD,EAAWO,cAAX,CAJM,CAAT;;AAMA,QAAMU,iBAAiB,GAAG,MAAM;AAC5Bd,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACH,GAFD;;AAIAO,EAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBT,KAAnB;AACA,SAAO,CAACA,KAAD,EAAQe,iBAAR,CAAP;AACH,CAnCD","sourcesContent":["import { useState, useEffect } from 'react'\n\nexport default (axios) => {\n    const { request, response } = axios.interceptors\n    const [error, setError] = useState(null)\n\n    const reqInterceptor = axios.interceptors.request.use((req) => {\n        setError(null)\n        return req\n    })\n\n    const resInterceptor = axios.interceptors.response.use(\n        (res) => res,\n        (err) => {\n            console.log('ssa', Object.keys(err), err.response)\n            setError({ message: err.response.data })\n        }\n    )\n\n    useEffect(() => {\n        return () => {\n            request.eject(reqInterceptor)\n        }\n    }, [request, reqInterceptor])\n\n    useEffect(() => {\n        return () => {\n            response.eject(resInterceptor)\n        }\n    }, [response, resInterceptor])\n\n    const closeErrorHandler = () => {\n        setError(null)\n    }\n\n    console.log('err', error)\n    return [error, closeErrorHandler]\n}\n"]},"metadata":{},"sourceType":"module"}