{"ast":null,"code":"import { put, delay } from 'redux-saga/effects';\nimport * as actions from '../actions/index';\nimport axios from 'axios';\nexport function* logoutSaga(action) {\n  yield localStorage.removeItem('token');\n  yield localStorage.removeItem('expirationDate');\n  yield localStorage.removeItem('userId');\n  yield put(actions.authLogoutSucceed);\n}\nexport function* authLogoutAsyncSaga(action) {\n  yield delay(action.expiresTime * 1000);\n  yield put(actions.authLogout());\n}\nexport function* authSaga(action) {\n  const authData = {\n    email: action.username,\n    password: action.password,\n    returnSecureToken: true\n  };\n  const signUpUrl = 'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyDKbV6ttrbEDvWY4e2YCUo-ST6GxKX8lAY';\n  const signInUrl = 'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDKbV6ttrbEDvWY4e2YCUo-ST6GxKX8lAY';\n  const url = action.isSignIn ? signInUrl : signUpUrl;\n\n  try {\n    yield put(actions.authStart());\n    const response = yield axios.post(url, authData);\n  } catch (error) {}\n\n  return dispatch => {\n    dispatch(authStart());\n    axios.post(url, authData).then(response => {\n      dispatch(authSuccess(response.data));\n      dispatch(authLogoutAsync(response.data.expiresIn));\n    }).catch(error => {\n      dispatch(authFail(error.response.data.error.message));\n    });\n  };\n}","map":{"version":3,"sources":["/home/thiago/Documentos/react/burger-builder/Saga/src/store/sagas/auth.js"],"names":["put","delay","actions","axios","logoutSaga","action","localStorage","removeItem","authLogoutSucceed","authLogoutAsyncSaga","expiresTime","authLogout","authSaga","authData","email","username","password","returnSecureToken","signUpUrl","signInUrl","url","isSignIn","authStart","response","post","error","dispatch","then","authSuccess","data","authLogoutAsync","expiresIn","catch","authFail","message"],"mappings":"AAAA,SAASA,GAAT,EAAcC,KAAd,QAA2B,oBAA3B;AACA,OAAO,KAAKC,OAAZ,MAAyB,kBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,UAAUC,UAAV,CAAqBC,MAArB,EAA6B;AAChC,QAAMC,YAAY,CAACC,UAAb,CAAwB,OAAxB,CAAN;AACA,QAAMD,YAAY,CAACC,UAAb,CAAwB,gBAAxB,CAAN;AACA,QAAMD,YAAY,CAACC,UAAb,CAAwB,QAAxB,CAAN;AAEA,QAAMP,GAAG,CAACE,OAAO,CAACM,iBAAT,CAAT;AACH;AAED,OAAO,UAAUC,mBAAV,CAA8BJ,MAA9B,EAAsC;AACzC,QAAMJ,KAAK,CAACI,MAAM,CAACK,WAAP,GAAqB,IAAtB,CAAX;AACA,QAAMV,GAAG,CAACE,OAAO,CAACS,UAAR,EAAD,CAAT;AACH;AAED,OAAO,UAAUC,QAAV,CAAmBP,MAAnB,EAA2B;AAC9B,QAAMQ,QAAQ,GAAG;AACbC,IAAAA,KAAK,EAAET,MAAM,CAACU,QADD;AAEbC,IAAAA,QAAQ,EAAEX,MAAM,CAACW,QAFJ;AAGbC,IAAAA,iBAAiB,EAAE;AAHN,GAAjB;AAKA,QAAMC,SAAS,GACX,uGADJ;AAEA,QAAMC,SAAS,GACX,mHADJ;AAGA,QAAMC,GAAG,GAAGf,MAAM,CAACgB,QAAP,GAAkBF,SAAlB,GAA8BD,SAA1C;;AAEA,MAAI;AACA,UAAMlB,GAAG,CAACE,OAAO,CAACoB,SAAR,EAAD,CAAT;AAEA,UAAMC,QAAQ,GAAG,MAAMpB,KAAK,CAACqB,IAAN,CAAWJ,GAAX,EAAgBP,QAAhB,CAAvB;AACH,GAJD,CAIE,OAAOY,KAAP,EAAc,CAAE;;AAElB,SAAQC,QAAD,IAAc;AACjBA,IAAAA,QAAQ,CAACJ,SAAS,EAAV,CAAR;AACAnB,IAAAA,KAAK,CACAqB,IADL,CACUJ,GADV,EACeP,QADf,EAEKc,IAFL,CAEWJ,QAAD,IAAc;AAChBG,MAAAA,QAAQ,CAACE,WAAW,CAACL,QAAQ,CAACM,IAAV,CAAZ,CAAR;AACAH,MAAAA,QAAQ,CAACI,eAAe,CAACP,QAAQ,CAACM,IAAT,CAAcE,SAAf,CAAhB,CAAR;AACH,KALL,EAMKC,KANL,CAMYP,KAAD,IAAW;AACdC,MAAAA,QAAQ,CAACO,QAAQ,CAACR,KAAK,CAACF,QAAN,CAAeM,IAAf,CAAoBJ,KAApB,CAA0BS,OAA3B,CAAT,CAAR;AACH,KARL;AASH,GAXD;AAYH","sourcesContent":["import { put, delay } from 'redux-saga/effects'\nimport * as actions from '../actions/index'\nimport axios from 'axios'\n\nexport function* logoutSaga(action) {\n    yield localStorage.removeItem('token')\n    yield localStorage.removeItem('expirationDate')\n    yield localStorage.removeItem('userId')\n\n    yield put(actions.authLogoutSucceed)\n}\n\nexport function* authLogoutAsyncSaga(action) {\n    yield delay(action.expiresTime * 1000)\n    yield put(actions.authLogout())\n}\n\nexport function* authSaga(action) {\n    const authData = {\n        email: action.username,\n        password: action.password,\n        returnSecureToken: true,\n    }\n    const signUpUrl =\n        'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyDKbV6ttrbEDvWY4e2YCUo-ST6GxKX8lAY'\n    const signInUrl =\n        'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDKbV6ttrbEDvWY4e2YCUo-ST6GxKX8lAY'\n\n    const url = action.isSignIn ? signInUrl : signUpUrl\n\n    try {\n        yield put(actions.authStart())\n\n        const response = yield axios.post(url, authData)\n    } catch (error) {}\n\n    return (dispatch) => {\n        dispatch(authStart())\n        axios\n            .post(url, authData)\n            .then((response) => {\n                dispatch(authSuccess(response.data))\n                dispatch(authLogoutAsync(response.data.expiresIn))\n            })\n            .catch((error) => {\n                dispatch(authFail(error.response.data.error.message))\n            })\n    }\n}\n"]},"metadata":{},"sourceType":"module"}